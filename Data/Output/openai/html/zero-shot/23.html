<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Poor man's hot reloading for Swift scripts Â· Alexito's World</title>
  <meta name="viewport" content="width=768">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-main: #282423;
      --bg-article: #231f1e;
      --bg-box: #191716;
      --text-main: #dddddd;
      --text-secondary: #aaaaaa;
      --text-muted: #666666;
      --text-highlight: #ffa32c;
      --text-accent: #d9aeff;
      --text-link: #ffa32c;
      --code-bg: #111;
      --code-fg: #fff;
      --btn-bg: #ffa32c;
      --btn-text: #fff;
      --btn-shadow: 0px 2px 7px 0px rgba(0,0,0,0.18);
      --border-radius: 10px;
      --tag-bg: #161413;
      --tag-fg: #fff;
      --tag-radius: 8px;
      --divider: #ffa32c;
      --font-title: 'JetBrains Mono', 'Menlo', 'Consolas', 'monospace';
      --font-main: 'Roboto', 'Arial', sans-serif;
      --article-width: 680px;
      --transition: 0.13s;
    }

    html, body {
      height: 100%;
    }
    body {
      background: var(--bg-main);
      color: var(--text-main);
      font-family: var(--font-main);
      font-size: 18px;
      line-height: 1.6;
      margin: 0;
      min-width: 768px;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
      outline: none;
    }
    a {
      color: var(--text-link);
      text-decoration: underline;
    }
    a:focus, a:hover { outline: 2px dotted var(--text-highlight); }
    header, main, footer {
      width: 100%;
      box-sizing: border-box;
    }
    .container {
      max-width: var(--article-width);
      margin: 0 auto;
      padding: 0 25px 0 25px;
    }
    header {
      background: var(--bg-box);
      text-align: center;
      padding: 0;
      box-shadow: 0px 1.5px 0 #00000028;
    }
    .site-title {
      color: #fff;
      font-family: var(--font-title);
      font-size: 2.28rem;
      font-weight: bold;
      letter-spacing: 0.2px;
      margin-top: 38px;
      margin-bottom: 9px;
      line-height: 1;
      text-shadow: 0 2.5px 0 rgb(45 39 32 / 25%);
    }
    .site-desc {
      color: #e3d7cb;
      font-size: 1.1rem;
      letter-spacing: 0.08em;
      font-weight: bold;
      margin-bottom: 26px;
      line-height: 1.2;
    }
    .site-desc em {
      font-family: var(--font-title);
      font-style: normal;
      font-weight: 700;
      font-size: 1.11em;
    }
    .site-nav {
      display: flex;
      gap: 0.5rem;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      color: #fff;
      margin-bottom: 13px;
    }
    .site-nav > span {
      opacity: 0.6;
      margin: 0 7px;
      font-size: 1.11em;
    }
    .site-nav a {
      color: #fff;
      text-decoration: none;
      font-weight: 700;
      padding: 2px 8px;
      border-radius: 7px;
      transition: background 0.13s;
    }
    .site-nav a:focus,
    .site-nav a:hover {
      background: #ffa32c50;
      outline: 2px solid var(--divider);
    }
    main {
      background: transparent;
      margin: 0;
      min-height: 60vh;
    }
    .metadata-info {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 35px;
      margin-bottom: 0;
      font-size: 1rem;
      color: #bbb;
    }
    .metadata-info hr {
      border: none;
      width: 100%;
      height: 3px;
      background: var(--divider);
      margin: 28px 0 21px 0;
      border-radius: 2px;
    }
    .metadata-date {
      letter-spacing: 0.02em;
      font-size: 1.01em;
    }
    .metadata-read {
      display: flex;
      align-items: center;
      gap: 0.4em;
      font-size: 16.1px;
    }
    .metadata-read svg {
      display: inline-block;
      vertical-align: -0.05em;
    }
    .metadata-read-time {
      margin-left: 1.5px;
      color: #fff;
      font-size: 17px;
      font-weight: 500;
      vertical-align: 1px;
    }
    .metadata-read-postfix {
      color: #bbb;
      font-size: 15.5px;
      margin-left: 2px;
    }
    .metadata-divider {
      border: none;
      height: 3px;
      background: var(--divider);
      margin: 22px 0 0 0;
      width: 100%;
      border-radius: 1.8px;
    }
    .article-content {
      margin-bottom: 24px;
    }
    .article-tags {
      display: flex;
      gap: 10px;
      margin-bottom: 21px;
    }
    .tag {
      background: var(--tag-bg);
      color: var(--tag-fg);
      border-radius: var(--tag-radius);
      padding: 5.5px 18px;
      font-size: 1rem;
      font-weight: 500;
      display: inline-block;
      font-family: var(--font-main);
      border: none;
      cursor: default;
      outline: none;
      min-width: 0;
    }
    .article-title {
      color: #e7e7e7;
      font-size: 2.0rem;
      line-height: 1.13;
      font-weight: 400;
      margin-bottom: 16px;
      max-width: 98%;
    }
    .article-body {
      color: #cccccc;
      font-size: 1.17rem;
      margin-bottom: 0.7em;
      margin-top: 0;
      font-family: var(--font-main);
    }
    .article-body strong {
      color: #fff;
      font-weight: bold;
    }
    .article-body em {
      color: #bbb;
      font-style: italic;
      letter-spacing: 0.01em;
    }
    .article-body a {
      color: var(--text-link);
      font-weight: 500;
      text-decoration-thickness: 2px;
    }
    .article-body code, .inline-code {
      background: #22181a;
      color: #fff;
      font-size: 0.98em;
      font-family: var(--font-title);
      border-radius: 6px;
      padding: 4.5px 10px 4.5px 10px;
      margin: 0 1.5px;
      white-space: pre-wrap;
      font-weight: 600;
    }
    .inline-code.bg-dark-pink {
      background: #65304d;
      color: #e2c4ea;
    }
    .inline-code.bg-repeater {
      background: #3c3138;
      color: #f37b77;
    }
    .inline-code.bg-blue {
      background: #283c60;
      color: #acc6f7;
    }
    .article-body .highlighted {
      color: #ffa32c;
      font-weight: 500;
      letter-spacing: 0.01em;
      text-decoration: underline;
    }
    pre {
      background: var(--bg-box);
      color: #e5e7e7;
      font-family: var(--font-title);
      border-radius: 10px;
      font-size: 1.03em;
      margin: 26px 0 18px 0;
      padding: 15px 18px 17px 18px;
      overflow-x: auto;
      width: 100%;
      transition: all 0.11s;
      line-height: 1.51em;
      box-shadow: none;
      border: none;
      outline: 0;
    }
    pre:focus { outline: 2px solid #ffaa2c; }
    .article-content p {
      margin: 0 0 1.1em 0;
    }
    .article-content p:last-child {
      margin-bottom: 0;
    }
    .twitter-share {
      font-size: 1.14rem;
      color: var(--text-link);
      font-weight: 500;
      margin: 40px 0 30px 0;
      outline: none;
    }
    .support-block {
      background: #121010;
      color: #fff;
      border-radius: 14px;
      padding: 32px 0 36px 0;
      text-align: center;
      font-size: 1.1rem;
      margin-bottom: 34px;
      margin-top: 10px;
      width: 100%;
      overflow: visible;
    }
    .support-block button, .support-block .coffee-btn {
      background: var(--btn-bg);
      color: var(--btn-text);
      font-size: 1.1rem;
      font-family: var(--font-title);
      font-weight: 700;
      margin-top: 23px;
      padding: 13px 34px 13px 32px;
      border: none;
      border-radius: 13px;
      cursor: pointer;
      box-shadow: var(--btn-shadow);
      display: inline-block;
      transition: background var(--transition);
    }
    .support-block button:focus, .support-block button:hover {
      background: #db870a;
      outline: 2px solid #faa82c;
    }
    .section-divider {
      border: none;
      height: 3.3px;
      background: var(--divider);
      width: 100%;
      border-radius: 2.5px;
      margin: 36px 0 23px 0;
      display: block;
    }
    .continue-section {
      margin-bottom: 25px;
    }
    .section-title {
      font-size: 1.41rem;
      color: #fff;
      font-weight: 500;
      margin-bottom: 13px;
      margin-top: 0;
      letter-spacing: 0.01em;
    }
    .continue-cards {
      display: flex;
      gap: 18px;
      flex-wrap: wrap;
      width: 100%;
      margin-bottom: 23px;
    }
    .continue-card {
      background: var(--bg-box);
      color: #eaeaea;
      border-radius: var(--border-radius);
      flex: 1 1 0;
      min-width: 0;
      padding: 22px 25px 22px 23px;
      min-width: 280px;
      font-size: 1.03rem;
      display: flex;
      flex-direction: column;
      justify-content: stretch;
      height: 108px;
      box-sizing: border-box;
      outline: none;
      transition: box-shadow var(--transition);
      box-shadow: 0 1px 15px 0 rgba(0,0,0,0.03);
    }
    .continue-card .card-label {
      color: #c6c6c6;
      font-size: 0.89em;
      margin-bottom: 5px;
    }
    .continue-card .card-title {
      color: #ffa32c;
      font-family: var(--font-main);
      font-size: 1.09em;
      font-weight: 500;
      line-height: 1.19;
      margin-bottom: 7.5px;
      margin-top: 0;
    }
    .continue-card .card-date {
      color: #c6c6c6;
      font-size: 1em;
      margin-top: auto;
      margin-bottom: 0;
      margin-right: 2px;
      align-self: flex-end;
    }
    .continue-card:last-child { min-width: 260px; }
    .similar-section {
      margin-top: 21px;
    }
    .similar-section .section-title { margin-bottom: 12px; }
    .similar-cards {
      display: flex;
      gap: 18px;
      flex-wrap: wrap;
      width: 100%;
      margin-bottom: 24px;
    }
    .similar-card {
      background: var(--bg-box);
      color: #fff;
      border-radius: var(--border-radius);
      flex: 1 1 0;
      min-width: 0;
      padding: 19px 21px 17px 17px;
      min-width: 196px;
      font-size: 1.05rem;
      box-sizing: border-box;
      outline: none;
      height: 145px;
      display: flex;
      flex-direction: column;
      gap: 0.1em;
    }
    .similar-card .card-label {
      color: #c6c6c6;
      font-size: 0.92em;
      margin-bottom: 1.7px;
      font-weight: 400;
    }
    .similar-card .card-title {
      color: #ffa32c;
      font-size: 1.08em;
      font-weight: 500;
      margin-top: 0;
      margin-bottom: 8.5px;
      letter-spacing: 0.01em;
      line-height: 1.15;
    }
    .similar-card .card-date {
      color: #c6c6c6;
      margin-top: auto;
      font-size: 1em;
      font-weight: 400;
      margin-bottom: 0;
    }
    .article-tags-bottom {
      display: flex;
      gap: 10.3px;
      margin-bottom: 55px;
    }
    .footer-divider {
      border: none;
      height: 2.5px;
      background: var(--divider);
      width: 101%;
      margin: 0 0 23px 0;
      border-radius: 1.7px;
      display: block;
    }
    footer {
      margin-top: 16px;
      color: #cebbab;
      font-size: 1.08rem;
      text-align: center;
      background: transparent;
      width: 100%;
      padding-bottom: 40px;
    }
    .footer-nav {
      margin-top: 20px;
      color: #ffa32c;
      font-size: 1.08rem;
      letter-spacing: 0.02em;
      margin-bottom: 8px;
    }
    .footer-links {
      color: #ffa32c;
      margin-bottom: 5px;
      font-size: 1rem;
      letter-spacing: 0.01em;
      font-family: var(--font-title);
    }
    .footer-links a {
      color: #ffa32c;
      text-decoration: underline;
      margin: 0 3.5px;
      padding: 0 1.5px;
      font-family: var(--font-title);
    }
    .footer-note {
      color: #a7896b;
      font-size: 1em;
      margin-bottom: 10px;
    }
    .footer-generator {
      color: #c7c7c7;
      font-size: 1em;
      margin-bottom: 8px;
      margin-top: 0;
    }
    .footer-generator a {
      color: #8980b7;
      text-decoration: underline;
    }
    @media (max-width: 830px) {
      .container {
        padding: 0 12px;
        min-width: 0px;
      }
      main, header, footer {
        min-width: 0;
      }
      .continue-card, .similar-card { min-width: 160px !important; }
    }
    @media (max-width: 820px) {
      .similar-cards, .continue-cards {
        flex-direction: column;
        gap: 10px;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="site-title" aria-label="Alexito's World"><span>Alexito's World</span></div>
      <div class="site-desc">
        A world of coding <span aria-hidden="true">ð»</span>, by <strong> Alejandro Martinez</strong>
      </div>
      <nav class="site-nav" aria-label="Site">
        <a href="#" tabindex="0">Swift</a>
        <span aria-hidden="true">|</span>
        <a href="#" tabindex="0">Development</a>
      </nav>
    </div>
  </header>
  <main>
    <div class="container">
      <div class="metadata-info">
        <div class="metadata-date" aria-label="Published on June 5, 2016">
          June 5, 2016
        </div>
        <div class="metadata-read" aria-label="1 minute read">
          <svg width="18" height="18" fill="#fff" aria-hidden="true"><circle cx="9" cy="9" r="8" fill="#fff" opacity="0.07"/><path d="M9 4v5h4" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <span class="metadata-read-time">1</span>
          <span class="metadata-read-postfix">min read</span>
        </div>
      </div>
      <hr class="metadata-divider" aria-hidden="true">
      <div class="article-content" aria-labelledby="main-article-title">
        <div class="article-tags" aria-label="Tags">
          <span class="tag">Scripting</span>
          <span class="tag">Swift</span>
          <span class="tag">Tips and Tricks</span>
        </div>
        <h1 class="article-title" id="main-article-title">Poor man's hot reloading for Swift scripts</h1>
        <div class="article-body">
          <p>
            The other day, while I was writing a <span class="highlighted">Swift script</span>,
            I added an option to make it run continuously so it could be on a server doing its job
            without stoping. <em>for eva.</em>
          </p>
          <p>
            To implement that I just used a
            <span class="inline-code bg-repeater" aria-label="repeat keyword">repeat</span>
            loop creating
            <span class="inline-code bg-blue" aria-label="NSTask keyword">NSTask</span>
            s that called the same script.
            <em>Scripts recursion.</em>
          </p>
          <p>
            The funny part is that with this simple thing I found a quick way to writing the script, almost as a hot reloading tool.
          </p>
          <pre tabindex="0" aria-label="Swift hot reload script code example">
let reload = "reload"
if Process.arguments.contains(reload) {
    repeat {
        let task = NSTask()
        task.launchPath = Process.arguments.first!
        task.arguments = Array(Process.arguments.suffixFrom(1).filter({$0 != reload}))
        task.launch()
        task.waitUntilExit()
    } while true
}
</pre>
          <p>
            Just drop this snippet at the top of the script, and when you call it with the
            <span class="inline-code" aria-label="reload argument">reload</span>
            argument it will start looping indefinitely.
          </p>
          <p>
            Then you can just call it from the command line like:
          </p>
          <pre tabindex="0" aria-label="Command line call example">
main.swift reload other params
</pre>
          <p>
            When that is done you can just modify the script and save the file, in the next execution your changes will be visible.
            If it fails to compile is not a big deal, the main script is still in memory without those changes so it will just loop and try to run it again.
          </p>
          <p>
            Obviously is not a big deal, is a bit annoying seeing all the console spammed, but I found it quite useful while I'm developing short scripts that I want to iterate on.
          </p>
          <p>
            Remember that you can use <span class="highlighted">OS signals</span> to stop the task when the main script is killed.
          </p>
        </div>
      </div>
      <div class="twitter-share" role="region">
        Share this article on Twitter
      </div>
      <section class="support-block" aria-label="Support">
        <div>If you liked this article please consider supporting me</div>
        <button class="coffee-btn">Buy me a coffee</button>
      </section>
      <hr class="section-divider" aria-hidden="true">
      <section class="continue-section" aria-label="Continue reading">
        <h2 class="section-title">Continue reading</h2>
        <div class="continue-cards">
          <div class="continue-card" role="article" aria-label="Next article: Using closures to simplify">
            <span class="card-label">Next article</span>
            <span class="card-title">Using closures to simplify</span>
            <span class="card-date">June 7, 2016</span>
          </div>
          <div class="continue-card" role="article" aria-label="Previous article: It's a trap! Catch OS signals in Swift.">
            <span class="card-label">Previous article</span>
            <span class="card-title">It's a trap! Catch OS signals in Swift.</span>
            <span class="card-date">May 29, 2016</span>
          </div>
        </div>
      </section>
      <section class="similar-section" aria-label="Similar suggested articles">
        <h2 class="section-title">Similar suggested articles</h2>
        <div class="similar-cards">
          <div class="similar-card" aria-label="Based on tag Swift: Backport SwiftUI modifiers">
            <span class="card-label">Based on tag <span class="highlighted">Swift</span></span>
            <span class="card-title">Backport SwiftUI modifiers</span>
            <span class="card-date">October 20, 2023</span>
          </div>
          <div class="similar-card" aria-label="Based on tag Scripting: Swift script to export lists from Reminders.app">
            <span class="card-label">Based on tag <span class="highlighted">Scripting</span></span>
            <span class="card-title">Swift script to export lists from Reminders.app</span>
            <span class="card-date">May 8, 2019</span>
          </div>
          <div class="similar-card" aria-label="Based on tag Tips and Tricks: Swift Collection's prefix for quick tests">
            <span class="card-label">Based on tag <span class="highlighted">Tips and Tricks</span></span>
            <span class="card-title">Swift Collection's prefix for quick tests</span>
            <span class="card-date">March 16, 2019</span>
          </div>
        </div>
      </section>
      <div class="article-tags-bottom" aria-label="Article tags">
        <div class="section-title" style="margin:0; font-size:1.22em; color:var(--text-main); font-weight:400;">
          Or check out this article tags
        </div>
        <span class="tag">Scripting</span>
        <span class="tag">Swift</span>
        <span class="tag">Tips and Tricks</span>
      </div>
    </div>
  </main>
  <footer>
    <hr class="footer-divider" aria-hidden="true">
    <nav class="footer-nav" aria-label="Footer">
      RSS
    </nav>
    <div class="footer-links" aria-label="Footer links">
      <a href="#">alexito4</a> |
      <a href="#">alexito4</a> |
      <a href="#">alexito4</a>
    </div>
    <div class="footer-note">
      Generated using <span style="color:#fff;">Publish</span>
    </div>
    <div class="footer-generator">
      <span style="color:#333; font-size:0.96em;">&copy; <span style="color:#c4a178;">alex.github</span></span>
    </div>
  </footer>
</body>
</html>